<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FinAssist AI</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>

<div class="chat-box">

    <!-- HEADER -->
    <div class="header">
        <b>ðŸ’° FinAssist AI</b>
        <button onclick="closeChat()">âœ–</button>
    </div>

    <!-- WELCOME -->
    <div class="welcome">
        <div id="welcomeText"></div>
        <button class="exit-btn" onclick="exitChat()">Exit Conversation</button>
    </div>

    <!-- MESSAGES -->
    <div id="messages"></div>

    <!-- TOOLBAR -->
    <div class="toolbar">
        <button class="emoji" onclick="addEmoji()">ðŸ˜Š</button>
        <button class="file" onclick="uploadFile()">ðŸ“Ž</button>
        <input id="input" placeholder="Ask finance question..." />
        <button class="send" onclick="send()">Send</button>
        <button class="refresh" onclick="refreshChat()">âŸ³</button>
    </div>

</div>

<script>

const backend="https://chat-bot-86is.onrender.com/chat";
const session_id="user_"+Math.floor(Math.random()*10000);

/* Ask user name */
const first_name=prompt("Enter your name") || "User";
document.getElementById("welcomeText").innerHTML=
    `<b>Hi There! Nice to see you ${first_name}</b>`;

/* Send message */
async function send(){
    const input=document.getElementById("input");
    const msg=input.value;
    if(!msg) return;

    addMessage("user",msg);
    input.value="";

    const res=await fetch(backend,{
        method:"POST",
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({session_id:session_id,message:msg})
    });

    const data=await res.json();
    addMessage("bot",data.response);
}

/* Add message */
function addMessage(role,text){
    const div=document.createElement("div");
    div.className=role;
    div.innerText=text;
    document.getElementById("messages").appendChild(div);
}

/* Refresh */
function refreshChat(){
    document.getElementById("messages").innerHTML="";
}

/* Close */
function closeChat(){
    document.querySelector(".chat-box").style.display="none";
}

/* Exit */
function exitChat(){
    alert("Conversation ended");
    refreshChat();
}

/* Emoji */
function addEmoji(){
    document.getElementById("input").value+="ðŸ˜Š";
}

/* File upload placeholder */
function uploadFile(){
    alert("File upload coming next ðŸš€");
}

</script>

</body>
</html>
